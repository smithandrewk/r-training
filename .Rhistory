scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "1 day") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "green"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=as.Date(sample_collect_date))) +
ggplot(PHL3_4, aes(x=as.Datesample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "1 day") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "green"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "1 day") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "green"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "green"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
PHL3_4 <- as.Date(PHL3_4$sample_collect_date)
PHL3_4 <- read_excel("Downloads/PHL3_4.xlsx")
PHL3_4$sample_collect_date <- as.Date(PHL3_4$sample_collect_date)
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "green"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "1 day") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "green"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "1 month") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "green"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "1 month") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "blue",
"decrease" = "#8F8F8F"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "1 month") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "#F2E095",
"decrease" = "#8F8F8F"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
ggplot(PHL3_4, aes(x=sample_collect_date)) +
geom_col(aes(y=cases_new_per100k/1),color='#A7AAB560') +
geom_smooth(aes(y=cases_new_per100k/1),method = "loess", se = FALSE, na.rm = TRUE,color='#A7AAB560') +
geom_point(aes(y=flowpop),color="black") +
geom_smooth(aes(y=flowpop),method = "loess", se = FALSE, na.rm = TRUE,color='black') +
scale_x_date(date_labels = "%Y-%m-%d", date_breaks = "2 month") +  # Format the x-axis to display dates
geom_tile(aes(y = -50, fill = trend_flowpop_15d8d_p05), height = 40) +  # This adds the color bar
scale_fill_manual(values = c(
"sustained increase" = "#F5C898",
"plateau" = "#9ACCFA",
"sustained decrease" = "#D36965",
"increase" = "#F2E095",
"decrease" = "#8F8F8F"
)) +
scale_y_continuous(sec.axis = sec_axis(~.*1, name = "Right Axis Label")) +
labs(
x = NULL,
y = "Left Axis Label"
) +
theme_minimal() +
ggtitle("Spline with Missing Data")
# file : lesson0.R
# author : Andrew Smith
# date: 11 May 2023
# description : Lesson 0 of R to DHEC
# install the latest version of the Epi R Handbook package
pacman::p_install_gh("appliedepi/epirhandbook")
# file : lesson0.R
# author : Andrew Smith
# date: 11 May 2023
# description : Lesson 0 of R to DHEC
# install the latest version of the Epi R Handbook package
install.packages("pacman")
library(pacman)
pacman::p_install_gh("appliedepi/epirhandbook")
get_data(file = "linelist_cleaned.rds")
print("hello world")
list([0,1,2,3,4])
reticulate::repl_python()
setwd("~/R_training")
# install.packages("pacman")
library(pacman)
p_load(ggplot2,readxl,apyramid)
setwd("/Users/andrew/rtraining")
print("hello world")
help(print)
sqrt(49)
linelist <- read_excel("linelist_cleaned.xlsx")
View(linelist)
summary(linelist)
help(age_pyramid)
linelist$age_cat5 <- as.factor(linelist$age_cat5,)
View(linelist)
linelist$age_cat5 <- as.factor(linelist$age_cat5,)
linelist$age_cat5
linelist$age_cat5
linelist$age_cat5 <- as.factor(linelist$age_cat5,)
linelist$age_cat5 <- as.factor(linelist$age_cat5)
linelist$age_cat5
ordered(linelist$age_cat5)
help(as.factor)
linelist$age_cat5 <- factor(linelist$age_cat5,levels=c("0-4","5-9", "10-14", "15-19", "20-24", "25-29" ,"30-34", "35-39", "40-44","45-49" ,"50-54" ,"55-59", "60-64","65-69", "70-74" ,"75-79", "80-84"))
age_pyramid(linelist,"age_cat5","gender",proportional=TRUE,pal=c("#7D82B8","#613F75"))
# Piping
linelist
# Piping
linelist %>% count(age_cat)
# Piping
library(magrittr)
linelist %>% count(age_cat)
library(dplyr)
linelist %>% count(age_cat)
sqrt(49)
print("hello world")
print("hello world")
sqrt(49)
library(pacman)
p_load(ggplot2,readxl,apyramid)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
```{r}
library(pacman)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
getwd()
ls()
ls
ls()
list.dirs()
list.dirs(getwd())
list.dirs()
list.dirs(path = getwd())
list.dirs(path = getwd())
list.files()
list.files()[2]
list.files()[3]
list.files()[4]
getwd()
list.files()
read_excel("linelist_cleaned.xlsx")
read_excel("/Users/andrew/R_training/linelist_cleaned.xlsx")
read_excel("~/R_training/linelist_cleaned.xlsx")
read_excel("linelist_cleaned.xlsx")
library(readxl)
read_excel("linelist_cleaned.xlsx")
df <- read_excel("linelist_cleaned.xlsx")
df <- read_excel("linelist_cleaned.xlsx")
df <- read_excel("linelist_cleaned.xlsx")
df <- read_excel("linelist_cleaned.xlsx")
read_excel("linelist_cleaned.xlsx")
df <- read_excel("linelist_cleaned.xlsx")
df
library(readxl)
df <- read_excel("linelist_cleaned.xlsx")
df
library(readxl)
df <- read_excel("linelist_cleaned.xlsx")
df
print("hello world")
sqrt(49)
library(pacman)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
getwd()
list.dirs(path = getwd())
list.files()
print("hello world")
sqrt(49)
library(pacman)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
getwd()
print("hello world")
sqrt(49)
library(pacman)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
getwd()
list.dirs(path = getwd())
list.files()
# Objects (everything is an object)
linelist <- read_excel("linelist_cleaned.xlsx")
View(linelist)
linelist$age_cat5
# Data Type, Casting
linelist$age_cat5 <- as.factor(linelist$age_cat5)
linelist$age_cat5
# Objects (everything is an object)
linelist <- read_excel("linelist_cleaned.xlsx")
linelist$age_cat5
typeof(linelist$age_cat5)
as.factor(linelist$age_cat5)
# Plotting
# install.packages("apyramid")
age_pyramid(linelist,"age_cat5","gender",proportional=TRUE,pal=c("#7D82B8","#613F75"))
# Data Type, Casting
linelist$age_cat5 <- as.factor(linelist$age_cat5)
# Plotting
# install.packages("apyramid")
age_pyramid(linelist,"age_cat5","gender",proportional=TRUE,pal=c("#7D82B8","#613F75"))
library(wesanderson)
detach("package:wesanderson", unload = TRUE)
detach("package:readxl", unload = TRUE)
library(readxl)
detach("package:readxl", unload = TRUE)
library(readxl)
detach("package:readxl", unload = TRUE)
library(readxl)
detach("package:readxl", unload = TRUE)
library(readxl)
detach("package:readxl", unload = TRUE)
library(readxl)
detach("package:readxl", unload = TRUE)
library(readxl)
install.packages("reactR")
p_load(ggplot2,readxl,reactlog)
linelist$age_cat5 <- factor(linelist$age_cat5,levels=c("0-4","5-9", "10-14", "15-19", "20-24", "25-29" ,"30-34", "35-39", "40-44","45-49" ,"50-54" ,"55-59", "60-64","65-69", "70-74" ,"75-79", "80-84"))
linelist
age_pyramid(linelist,"age_cat5","gender",proportional=TRUE,pal=c("#7D82B8","#613F75"))
%>%
# Not in base R
# Piping operator comes with magrittr
linelist %>% count(age_cat5)
# Not in base R
# Piping operator comes with magrittr
print("hello")
linelist %>% count(age_cat5)
linelist %>% count(age_cat5)
linelist %>% count(age_cat5)
linelist %>% count(age_cat5)
# Not in base R
# Piping operator comes with magrittr
print("hello")
linelist %>% count(age_cat5)
# Not in base R
# Piping operator comes with magrittr
linelist %>% count(age_cat5)
count(age_cat5)
count(linelist$age_cat5)
count(linelist)
count(linelist,age_cat5)
linelist
# Very important function
linelist$age
# Very important function
linelist$age > 50
# Very important function
linelist[linelist$age > 50,]
# Very important function
# linelist[linelist$age > 50,] # base R
filter(linelist,age>50)
linelist
linelist$age_years
linelist$age_years * 12
linelist$age_years
linelist$age_years * 12
linelist$age_years * 12.0
linelist$age_years * 12
linelist$age_months <- linelist$age_years * 12
linelist
# linelist$age_months <- linelist$age_years * 12
mutate(linelist,age_months_tmp = age_years * 12)
line
linelist
linelist_filtered <- filter(linelist, age > 50)
linelist_filtered
linelist_filtered_mutated <- mutate(linelist_filtered, age_months = age_years * 12)
linelist_filtered_mutated
linelist
linelist <- filter(linelist, age > 50)
linelist <- mutate(linelist, age_months = age_years * 12)
linelist
print("hello world")
sqrt(49)
library(pacman)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
getwd()
list.dirs(path = getwd())
list.files()
library(readxl)
linelist <- read_excel("linelist_cleaned.xlsx")
linelist
linelist$age_cat5 <- factor(linelist$age_cat5,levels=c("0-4","5-9", "10-14", "15-19", "20-24", "25-29" ,"30-34", "35-39", "40-44","45-49" ,"50-54" ,"55-59", "60-64","65-69", "70-74" ,"75-79", "80-84"))
linelist
age_pyramid(linelist,"age_cat5","gender",proportional=TRUE,pal=c("#7D82B8","#613F75"))
# Not in base R
# Piping operator comes with magrittr
linelist %>% count(age_cat5)
count(linelist,age_cat5)
# Very important function
# linelist[linelist$age > 50,] # base R
filter(linelist, age>50)
# linelist$age_months <- linelist$age_years * 12
mutate(linelist, age_months_tmp = age_years * 12)
linelist
linelist <- filter(linelist, age > 50)
linelist <- mutate(linelist, age_months = age_years * 12)
linelist
View(linelist)
print("hello world")
sqrt(49)
library(pacman)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
getwd()
list.dirs(path = getwd())
list.files()
library(readxl)
linelist <- read_excel("linelist_cleaned.xlsx")
linelist
linelist$age_cat5 <- factor(linelist$age_cat5,levels=c("0-4","5-9", "10-14", "15-19", "20-24", "25-29" ,"30-34", "35-39", "40-44","45-49" ,"50-54" ,"55-59", "60-64","65-69", "70-74" ,"75-79", "80-84"))
linelist
age_pyramid(linelist,"age_cat5","gender",proportional=TRUE,pal=c("#7D82B8","#613F75"))
# Not in base R
# Piping operator comes with magrittr
linelist %>% count(age_cat5)
count(linelist,age_cat5)
# Very important function
# linelist[linelist$age > 50,] # base R
filter(linelist, age>50)
# linelist$age_months <- linelist$age_years * 12
mutate(linelist, age_months_tmp = age_years * 12)
print("hello world")
sqrt(49)
library(pacman)
p_load(ggplot2,readxl)
setwd("/Users/andrew/R_training")
getwd()
list.dirs(path = getwd())
list.files()
library(readxl)
linelist <- read_excel("linelist_cleaned.xlsx")
linelist
linelist$age_cat5 <- factor(linelist$age_cat5,levels=c("0-4","5-9", "10-14", "15-19", "20-24", "25-29" ,"30-34", "35-39", "40-44","45-49" ,"50-54" ,"55-59", "60-64","65-69", "70-74" ,"75-79", "80-84"))
linelist
age_pyramid(linelist,"age_cat5","gender",proportional=TRUE,pal=c("#7D82B8","#613F75"))
linelist %>% mutate(age_months = age_years * 12)
linelist %>% mutate(age_months = age_years * 12) %>% filter(age > 50)
linelist %>%
mutate(age_months = age_years * 12) %>%
filter(age > 50)
linelist %>%
mutate(age_months = age_years * 12) %>%
filter(age > 50) %>%
count(age_months)
linelist %>%
mutate(age_months = age_years * 12) %>%
filter(age > 50) %>%
count(outcome)
summary <- linelist %>%
mutate(age_months = age_years * 12) %>%
filter(age > 50) %>%
count(outcome)
summary
View(summary)
summary <- linelist %>%
mutate(age_months = age_years * 12) %>%
filter(age > 50) %>%
count(outcome) %>%
is.na()
summary <- linelist %>%
mutate(age_months = age_years * 12) %>%
filter(age > 50) %>%
count(outcome) %>%
drop.na()
